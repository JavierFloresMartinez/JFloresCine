@model ML.Cine
@{
    ViewData["Title"] = "Form";
}

<h2>Formulario</h2>

<div class="row">

    <div class="col-md-12">

        @using (Html.BeginForm("Form", "Cine", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {

            <div class="row">
                <div class="col" style="display:none">
                    @Html.LabelFor(model => model.IdCine, new { @class = "visually-hidden" })

                    @Html.TextBoxFor(model => model.IdCine, new { @class = "visually-hidden form-control" })
                </div>
                <div class="col">
                    @Html.LabelFor(model => model.Nombre)

                    @Html.TextBoxFor(model => model.Nombre, new { @class = "form-control", @id = "txtNombre" })

                    @Html.ValidationMessageFor(model => model.Nombre)
                </div>

                <div class="col">
                    @Html.LabelFor(model => model.Direccion)

                    @Html.TextBoxFor(model => model.Direccion, new { @class = "form-control", @id = "Direccion", @name ="Direccion", @readonly = true })

                    @Html.ValidationMessageFor(model => model.Direccion)
                </div>

                <div class="col">
                    @Html.LabelFor(model => model.Zona)
                    @Html.DropDownListFor(model => model.Zona.IdZona, new SelectList(Model.Zona.Zonas, "IdZona", "Nombre"), "Selecciona una opción", new { @class = "form-control" })

                    @Html.ValidationMessageFor(model => model.Zona.IdZona)
                </div>

                <div class="col">
                    @Html.LabelFor(model => model.Venta)

                    @Html.TextBoxFor(model => model.Venta, new { @class = "form-control", @id = "txtNombre" })

                    @Html.ValidationMessageFor(model => model.Venta)
                </div>

            </div>
            <br />
            <div class="row">
                <div class="col">
                    <input class="btn btn-secondary" type="button" value="Haga Click Para Mostar El Mapa" onclick="DisplayGoogleMap()" />

                </div>
                 <div id="myDiv" style="width:100%;height:400px;"></div>
            </div>
 
            <br />
            <div class="row">
                <div class="col">
                    <input type="submit" value="Guardar" class="btn btn-success" />

                    @Html.ActionLink("Regresar", "GetAll", "Cine", htmlAttributes: new { @class = "btn btn-danger" })
                </div>

            </div>
        }
    </div>

</div>


@section Scripts {
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSKBDdPPlfca_zTwyxKiicRQn1qfgRjLw"></script>

     <script type="text/javascript">  
        function DisplayGoogleMap() {
            var latitude;
            var longitude;
            var direccion = document.getElementById("Direccion").value;
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode({ 'address': direccion }, function (results, status) {

                if (status == google.maps.GeocoderStatus.OK) {
                    latitude = results[0].geometry.location.lat();
                    longitude = results[0].geometry.location.lng();
                   
                }
            });
            //Establecer la latitud y la longitud del mapa
            var myAddress = new google.maps.LatLng(latitude, longitude);

            //Crear opciones o establecer diferentes características de Google Map
            var mapOptions = {  
                center: myAddress,  
                zoom: 15,  
                minZoom: 15,  
                mapTypeId: google.maps.MapTypeId.ROADMAP  
            };

            //Mostrar el mapa de Google en el control div con las Opciones definidas
            var map = new google.maps.Map(document.getElementById("myDiv"), mapOptions);

            // Establecer marcador en el mapa
            var marker = new google.maps.Marker({  
                position: myAddress,  
                animation: google.maps.Animation.BOUNCE,  
            });  
  
            marker.setMap(map);  
           }      
    </script>  
}